<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Admin - Usuarios</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <style>.badge-role{font-size:.8rem}</style>
  </head>
<body>
<header class="p-3 bg-dark text-white">
  <div class="container d-flex gap-3 align-items-center">
    <a class="text-light" href="/admin">‚Üê Admin</a>
    <h1 class="h5 m-0">Usuarios y roles</h1>
  </div>
</header>
<main class="container py-4">
  <table class="table table-striped">
    <thead><tr><th>ID</th><th>Nombre</th><th>Email</th><th>Rol</th></tr></thead>
    <tbody>
      <tr th:each="u: ${list}">
        <td th:text="${u.id}"></td>
        <td th:text="${u.nombre}"></td>
        <td th:text="${u.email}"></td>
        <td>
          <span class="badge bg-secondary badge-role" th:text="${u.rol}"></span>
        </td>
        <td>
          <form th:action="@{'/admin/usuarios/' + ${u.id} + '/role'}" method="post" style="display:inline">
            <select name="rol" class="form-select form-select-sm" style="display:inline-block;width:auto">
              <option th:selected="${u.rol.name()=='USER'}" value="USER">USER</option>
              <option th:selected="${u.rol.name()=='ADMIN'}" value="ADMIN">ADMIN</option>
            </select>
            <button class="btn btn-sm btn-outline-primary" type="submit">Cambiar</button>
          </form>
          <form th:action="@{'/admin/usuarios/' + ${u.id} + '/delete'}" method="post" style="display:inline;margin-left:6px">
            <button class="btn btn-sm btn-outline-danger">Eliminar</button>
          </form>
        </td>
      </tr>
    </tbody>
  </table>
  <p class="text-muted">Nota: Solo <b>admin@cine.local</b> tiene rol ADMIN y puede administrar el sistema. Los demas usuarios se registran como <b>USER</b>.</p>
</main>
</body>
</html>

