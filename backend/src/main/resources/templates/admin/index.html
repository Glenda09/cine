<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel de Administracion</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/admin-dashboard.css}" />
</head>
<body class="admin-dashboard">
<header class="admin-header">
  <div class="brand">
    <a href="/admin" class="brand-link">
      <span class="brand-icon" aria-hidden="true">&#127910;</span>
      <span class="brand-name">CineHub</span>
    </a>
  </div>
  <nav class="admin-nav" aria-label="Administracion">
    <a href="/admin/peliculas" class="nav-link" th:classappend="${#httpServletRequest.requestURI.startsWith('/admin/peliculas')} ? ' nav-link--active'">Peliculas</a>
    <a href="/admin/funciones" class="nav-link" th:classappend="${#httpServletRequest.requestURI.startsWith('/admin/funciones')} ? ' nav-link--active'">Funciones</a>
    <a href="/admin/salas" class="nav-link" th:classappend="${#httpServletRequest.requestURI.startsWith('/admin/salas')} ? ' nav-link--active'">Salas</a>
    <a href="/admin/categorias" class="nav-link" th:classappend="${#httpServletRequest.requestURI.startsWith('/admin/categorias')} ? ' nav-link--active'">Categorias</a>
    <a href="/admin/usuarios" class="nav-link" th:classappend="${#httpServletRequest.requestURI.startsWith('/admin/usuarios')} ? ' nav-link--active'">Usuarios</a>
  </nav>
  <div class="admin-profile">
    <a href="/" class="nav-link nav-link--muted">Ir al sitio</a>
    <button class="icon-button" type="button" aria-label="Notificaciones">&#128276;</button>
    <div class="avatar" aria-hidden="true">AD</div>
  </div>
</header>
<main class="admin-main">
  <section class="page-heading">
    <p class="eyebrow">Panel general</p>
    <h1>Gestionar Peliculas</h1>
    <p class="subtitle">Visualiza el estado de tu catalogo y navega rapidamente hacia las acciones clave.</p>
    <div class="summary-chips">
      <span class="chip">Peliculas: <b th:text="${pelis}">0</b></span>
      <span class="chip">Salas: <b th:text="${salas}">0</b></span>
      <span class="chip">Funciones: <b th:text="${funciones}">0</b></span>
      <span class="chip">Categorias: <b th:text="${categorias}">0</b></span>
    </div>
  </section>

  <section class="card">
    <div class="card-header">
      <h2>Peliculas recientes</h2>
      <a class="link-primary" href="/admin/peliculas">Ver todas</a>
    </div>
    <div class="table-wrapper" th:if="${dashboardPeliculas != null and !dashboardPeliculas.isEmpty()}">
      <table class="movies-table">
        <thead>
        <tr>
          <th>Titulo</th>
          <th>Director</th>
          <th>Genero</th>
          <th>Calificacion</th>
          <th>Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="peli : ${dashboardPeliculas}">
          <td class="cell-title">
            <span class="movie-title" th:text="${peli.titulo()}">Nombre de pelicula</span>
            <span class="movie-meta" th:text="${peli.clasificacion()}">Clasificacion desconocida</span>
          </td>
          <td><span class="movie-director" th:text="${peli.director()}">Sin director asignado</span></td>
          <td>
            <span class="badge badge-genre" th:text="${peli.genero()}">Sin genero</span>
          </td>
          <td>
            <div class="rating-bar">
              <div class="rating-track">
                <div class="rating-fill" th:style="'width:' + ${peli.calificacion()} + '%'" aria-hidden="true"></div>
              </div>
              <span class="rating-value" th:text="${peli.calificacion()}">0</span>
            </div>
          </td>
          <td class="cell-actions">
            <a th:href="@{/admin/peliculas/{id}/edit(id=${peli.id()})}">Ver detalle</a>
            <span class="divider" aria-hidden="true">|</span>
            <a th:href="@{/admin/peliculas/{id}/edit(id=${peli.id()})}">Editar</a>
            <span class="divider" aria-hidden="true">|</span>
            <form th:action="@{/admin/peliculas/{id}/delete(id=${peli.id()})}" method="post" class="inline-form" onsubmit="return confirm('Deseas eliminar esta pelicula?');">
              <button type="submit" class="link-button">Eliminar</button>
            </form>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="empty-state" th:if="${dashboardPeliculas == null or dashboardPeliculas.isEmpty()}">
      <p>No hay peliculas registradas todavia. Crea la primera desde la seccion “Peliculas”.</p>
      <a class="link-primary" href="/admin/peliculas">Crear pelicula</a>
    </div>
  </section>
</main>
</body>
</html>










